<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">  
    <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Font+Name">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>NEWS JACK</title> 

<style>
    body {
        font-family: Arial, sans-serif;
    }

    #label-form {
        margin-bottom: 20px;
        padding-top: 20px;
        padding-bottom: 15px;
    }

    .label {
        display: inline-block;
        padding: 5px 10px;
        margin-right: 10px;
        background-color: #f1f1f1;
        border-radius: 5px;
        cursor: pointer;
    }

    .label.active {
        background-color: #5df442;
        color: #fff;
    }

    .input-css{
        height: 100%;
        width: 100%;
        outline: none;
        border: none;
        background-color: var(--primary-color-light);
        color: var(--text-color);
        border-radius: 6px;
        font-size: 17px;
        font-weight: 500;
        transition: var(--tran-05);
        padding-bottom: 5px;
        padding-top: 5px;
        padding-left: 5px;
    }

    .conversation {
        margin-bottom: 20px;
        padding: 10px;
        background-color: #f1f1f1;
        border-radius: 5px;
    }

    .conversation h2 {
        margin: 0 0 10px 0;
    }
</style>


    <style>
		.filter-icon {
			font-size: 24px;
			margin-right: 5px;
			vertical-align: middle;
		}
	</style>

</head>
<body class="body">
    <nav class="sidebar close">
        <header>
            <div class="image-text">
                <span class="image">
                    <img src="logo.png" alt="">
                </span>

                <div class="text logo-text">
                    <span class="name">NJ</span>
                    <span class="profession">News Letter</span>
                </div>
            </div>

            <i class='bx bx-chevron-right toggle'></i>
        </header>

        <div class="menu-bar">
            <div class="menu">

               

                <ul class="menu-links">
                    <li class="nav-link">
                        <a href="index.html">
                            <i class='bx bx-home-alt icon' ></i>
                            <span class="text nav-text">Dashboard</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="Notes.html">
                            <i class=' bx bx-folder-open icon' ></i>
                            <span class="text nav-text">Notes</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="Channels.html">
                            <i class=' bx bx-paper-plane icon' ></i>
                            <span class="text nav-text">Channels</span>
                        </a>
                    </li>

                    <li class="nav-link">
                        <a href="archived.html">
                              <i class='bx bx-archive icon' ></i>               
                                  <span class="text nav-text">Archived</span>           
                           </a>              
                   </li>  

            

                    <li class="nav-link">
                           <a href="setttings.html">
                                 <i class='bx bx-cog icon' ></i>               
                                     <span class="text nav-text">Setting</span>           
                              </a>              
                      </li>                                   
                </ul>
            </div>

            <div class="bottom-content">
                <script>document.querySelector('.fa-sign-out').addEventListener('click', function() {
                    // Code to log the user out goes here
                    window.location.replace("Login.html");

                });
                </script>
                <li class="">
                    <a href="logout.php">
                        <i class='bx bx-log-out icon'></i>
                        <span class="text nav-text">Logout</span>
                    </a>                    
                </li>
                
                <li class="mode">
                    <div class="sun-moon">
                        <i class='bx bx-moon icon moon'></i>
                    </div>
                    <span class="mode-text text">Dark mode</span>

                    <div class="toggle-switch">
                        <span class="switch"></span>
                    </div>
                </li>
                 <li class="search-box">
                    
                </li>
            </div>
        </div>
    </nav>

    <section class="home">
        <!--Header start-->
                    <div class="header">
                        <div class="header__left">
                            <span class="material-icons"></span>
                            <span class="material-icons"></span>
                    </div>

                    <div class="header__middle">
                        <img src="logo.png" height="50px" alt="">
                        <h2>NewsJack</h2>
                    </div>

                    <div class="header__right">
                    <div class="notification">
                    <span style="color: rgb(9, 9, 9);" class="material-icons">notifications_active</span>
                    <span class="badge">0</span> 
                    <div class="dropdown-content">
                        <!-- Notification items will be dynamically added here -->
                </div>
            </div>

        <script>
        // Set up a WebSocket connection with the server to receive new emailRows
        const socket = new WebSocket('wss://your-server.com/notification');

        // Listen for incoming messages from the server
        socket.addEventListener('message', function (event) {
            // Parse the message data as a JSON object
            const data = JSON.parse(event.data);

            // Update the notification badge to show the number of new emailRows
            const badge = document.querySelector('.badge');
            badge.textContent = data.emailRows.length;

            // Clear the existing notification items from the dropdown
            const dropdown = document.querySelector('.dropdown-content');
            dropdown.innerHTML = '';

            // Add each new emailRow as a new notification item in the dropdown
            data.emailRows.forEach(function (emailRow) {
            const item = document.createElement('div');
            item.classList.add('notification-item');
            item.textContent = emailRow.subject;
            dropdown.appendChild(item);
            });
        });

        // Add a click event listener to the notification icon
        const notificationIcon = document.querySelector('.notification .material-icons');
        notificationIcon.addEventListener('click', function () {
            // Toggle the visibility of the dropdown content
            const dropdown = document.querySelector('.dropdown-content');
            dropdown.classList.toggle('show');
        });

        // Close the dropdown content when the user clicks outside of it
        window.addEventListener('click', function (event) {
            const dropdown = document.querySelector('.dropdown-content');
            if (!event.target.matches('.notification .material-icons') && !dropdown.contains(event.target)) {
            dropdown.classList.remove('show');
            }
        });
        </script>

        <style>
        .dropdown-content {
            display: none;
            position: absolute;
            z-index: 1;
        }

        .dropdown-content.show {
            display: block;
        }
        </style>

            
        </div>

    </div>
        <!--Header ends-->


        <div class="emailList">
            <div class="emailList__settings">
                <div class="emailList__setingsLeft">
                    <input type="checkbox" id="select-all-checkbox" onclick="selectAllEmailRows()">
                        <b>Select All</b>
                </div>

                
                <div class="emailList__settingsMiddle">
                    <div class="input-group" id="content">
                        <input id="searchBar" type="text" placeholder="Search Data...">
                        <button id="search" type="button"><span class="material-icons" id="search_icon">search</span></button>
                        <div id="autocomplete-results"></div>
                    </div>
                </div>
                
                
                <script>
                const listIcon = document.querySelector('.dropbtn');
                const filterIconsContainer = document.querySelector('.dropdown-content');

                listIcon.addEventListener('click', function() {
                    filterIconsContainer.classList.toggle('show');
                });

                window.addEventListener('click', function(event) {
                    if (!event.target.matches('.dropbtn')) {
                        const dropdowns = document.getElementsByClassName('dropdown-content');
                        for (let i = 0; i < dropdowns.length; i++) {
                            const dropdown = dropdowns[i];
                            if (dropdown.classList.contains('show')) {
                                dropdown.classList.remove('show');
                            }
                        }
                    }
                });

                </script>
                
                    
                        
                        <!--<button id="shareBtn" class="button">SHARE</button>--> 

                    <div class="emailList__settingRight">
                        <button onclick="shareSelectedEmails()" style="background-color: #dc4808;
                        color: #fff;
                        border: none;
                        border-radius: 50px;
                        box-shadow: 10px 10px 14px 1px rgb(0 0 0 / 20%);
                        padding: 0.2em 1em;
                        cursor: pointer;" >
                            <span class="material-icons">share</span>  
                          </button>  
                    </div>
                    <script>
                        function shareSelectedEmails() {
                          const selectedEmails = document.querySelectorAll('.emailRow__checkbox input:checked');
                          let body = '';
                          selectedEmails.forEach(email => {
                            const senderName = email.closest('.emailRow').querySelector('.emailRow__senderName').textContent;
                            const subject = email.closest('.emailRow').querySelector('.emailRow__subject').textContent;
                            const snippet = email.closest('.emailRow').querySelector('.emailRow__snippet').textContent;
                            body += `Sender: ${senderName}%0D%0ASubject: ${subject}%0D%0ABody: ${snippet}%0D%0A%0D%0A`;
                          });
                          const shareUrl = `mailto:?body=${body}`;
                          window.location.href = shareUrl; // open the default email client with the email content populated
                        }
                        </script>
                </div>
                
                <script>
                    function deleteRow(row) {
                        var result = confirm("Are you sure to delete?");
                        if(result){
                            // Remove the email row from the DOM
                            row.parentNode.removeChild(row);
                        }
                        }

                       


                function searchEmails() {
                    const searchQuery = document.getElementById("searchBar").value.toLowerCase();
                    const emailRows = document.querySelectorAll(".emailRow");

                    emailRows.forEach(row => {
                        const senderName = row.querySelector(".emailRow__senderName").textContent.toLowerCase();
                        const subject = row.querySelector(".emailRow__subject").textContent.toLowerCase();
                        const snippet = row.querySelector(".emailRow__snippet").textContent.toLowerCase();

                        if (senderName.includes(searchQuery) || subject.includes(searchQuery) || snippet.includes(searchQuery)) {
                        row.style.display = "flex";
                        } else {
                        row.style.display = "none";
                        }
                    });
                    }

                    document.getElementById("search").addEventListener("click", searchEmails);
                    document.getElementById("searchBar").addEventListener("keyup", searchEmails);

  </script>

                    <script>
                             //archives
                             function archiveRow(emailRow) {
                        // Get the email data from the email row
                        const emailData = {
                            senderName: emailRow.querySelector('.emailRow__senderName').textContent,
                            subject: emailRow.querySelector('.emailRow__subject').textContent,
                            snippet: emailRow.querySelector('.emailRow__snippet').textContent,
                            date: emailRow.querySelector('.emailRow__dateText').textContent,
                            time: emailRow.querySelector('.emailRow__timeText').textContent,
                        };

                        // Get the list of archived emails from local storage
                        const archivedEmails = JSON.parse(localStorage.getItem('archivedEmails')) || [];

                        // Add the email data to the archived emails array
                        archivedEmails.push(emailData);

                        // Store the updated archived emails array in local storage
                        localStorage.setItem('archivedEmails', JSON.stringify(archivedEmails));

                        // Remove the email row from the email list
                        emailRow.remove();
                        }


                        // define functions and storeEmails() function here
                        function storeEmails() {
                    const emailRows = document.querySelectorAll('.emailRow');
                    const emails = [];

                    emailRows.forEach(row => {
                        const email = {
                        senderName: row.querySelector('.emailRow__senderName').textContent,
                        subject: row.querySelector('.emailRow__subject').textContent,
                        snippet: row.querySelector('.emailRow__snippet').textContent,
                        date: row.querySelector('.emailRow__dateText').textContent,
                        time: row.querySelector('.emailRow__timeText').textContent,
                        read: row.classList.contains('emailRow--read'),
                        archived: row.classList.contains('emailRow--archived'),
                        incoming: row.classList.contains('emailRow--incoming')
                        };
                        emails.push(email);
                    });

                    localStorage.setItem('emails', JSON.stringify(emails));
                    }


                        displayEmails(); // call this at the bottom to display the stored emails
                    </script>


                    <!-- Email group starts -->
<div class="emailGroup">
    <div class="emailGroup__date">Mar 29</div>

    <!-- Email row starts -->
    <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)">
        <div class="emailRow__checkbox">
            <input type="checkbox" name="email"> 
        </div>
        <div class="emailRow__senderName">John Doe</div>
        <div class="emailRow__sender" onclick="navigateToPage()">
            <div class="emailRow__subject">New Features Added
                <span class="emailRow__snippet">-Check out the new MANDATES we just added to our app Check out the new MANDATES we just added to our app</span>
            </div>
        </div>
        <div>
            <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
            <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
            <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
        </div>
        <div class="emailRow__date">
            <div class="emailRow__dateText">Mar 29</div>
            <div class="emailRow__timeText">12:34 PM</div>
        </div>
    </div>
    <!-- Email row ends -->

    <!-- Email row starts -->
    <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)" data-label="Important">
        <div class="emailRow__checkbox">
            <input type="checkbox" name="email"> 
        </div>
        <div class="emailRow__senderName">Jane Doe</div>
        <div class="emailRow__sender" onclick="navigateToPage()">
            <div class="emailRow__subject">Meeting Reminder
                <span class="emailRow__snippet">-Don't forget our meeting tomorrow at 10 AM</span>
            </div>
        </div>
        <div>
            <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
            <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
            <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
        </div>
        <div class="emailRow__date">
            <div class="emailRow__dateText">Mar 29</div>
            <div class="emailRow__timeText">12:34 PM</div>
        </div>
    </div>
    <!-- Email row ends -->
</div>
<!-- Email group ends -->

<div class="emailGroup">
    <div class="emailGroup__date">Feb 29</div>
    <!-- Email row starts -->
    <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)">
        <div class="emailRow__checkbox">
            <input type="checkbox" name="email"> 
        </div>
        <div class="emailRow__senderName">John Doe</div>
        <div class="emailRow__sender" onclick="navigateToPage()">
            <div class="emailRow__subject">New Features Added
                <span class="emailRow__snippet">-Check out the new MANDATES we just added to our app Check out the new MANDATES we just added to our app</span>
            </div>
        </div>
        <div>
            <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
            <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
            <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
        </div>
        <div class="emailRow__date">
            <div class="emailRow__dateText">Feb 29</div>
            <div class="emailRow__timeText">12:34 PM</div>
        </div>
    </div>
    <!-- Email row ends -->

     <!-- Email row starts -->
     <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)">
        <div class="emailRow__checkbox">
            <input type="checkbox" name="email"> 
        </div>
        <div class="emailRow__senderName">Malik Doe</div>
        <div class="emailRow__sender" onclick="navigateToPage()">
            <div class="emailRow__subject">New Features Added
                <span class="emailRow__snippet">-Check out the new MANDATES we just added to our app Check out the new MANDATES we just added to our app</span>
            </div>
        </div>
        <div>
            <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
            <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
            <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
        </div>
        <div class="emailRow__date">
            <div class="emailRow__dateText">Feb 29</div>
            <div class="emailRow__timeText">12:34 PM</div>
        </div>
    </div>
    <!-- Email row ends -->


    <!-- Email row starts -->
    <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)" data-conversation="conversation_1">
        <div class="emailRow__checkbox">
            <input type="checkbox" name="email">
        </div>
        <div class="emailRow__senderName">Leivy Doe</div>
        <div class="emailRow__sender" onclick="navigateToPage()">
            <div class="emailRow__subject">New Features Added
                <span class="emailRow__snippet">-Check out the new JOBS we just added to our app</span>
            </div>
        </div>
        <div>
            <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
            <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
            <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
        </div>
        <div class="emailRow__date">
            <div class="emailRow__dateText">Feb 29</div>
            <div class="emailRow__timeText">12:34 PM</div>
        </div>
    </div>
    <!-- Email row ends -->

        <!-- Email row starts -->
        <div class="emailRow" id="email_Row" onclick="toggleFontWeight(this)">
            <div class="emailRow__checkbox">
                <input type="checkbox" name="email">
            </div>
            <div class="emailRow__senderName">Lee Doe</div>
            <div class="emailRow__sender" onclick="navigateToPage()">
                <div class="emailRow__subject">New Features Added
                    <span class="emailRow__snippet">
                        Hi there,
                    Thank you for subscribing to our channel. We are excited to announce that we have added some new features to our app. Check them out now!
                    Best regards,
                    The Channel Team
                    </span>
                </div>
            </div>
            <div>
                <span style="color: gray;" class="material-icons mark_chat_unread" onclick="toggleReadState(event)">mark_chat_unread</span>
                <span style="color: gray;" class="material-icons" onclick="deleteRow(this.closest('.emailRow'))">delete</span>
                <span style="color: gray;" class="material-icons" onclick="archiveRow(this.closest('.emailRow'))">archive</span>
            </div>
            <div class="emailRow__date">
                <div class="emailRow__dateText">Feb 29</div>
                <div class="emailRow__timeText">12:34 PM</div>
            </div>
        </div>
        <!-- Email row ends -->
</div>
</div>
    </section> 

<script>
    //checkBoxes function
function checkUncheck(main) {
    all = document.getElementsByName('lang');
    for(var a=0;a<all.length;a++) {
        all[a].checked = main.checked;
    }
}
</script>
  
    <script src="SendMail.js"></script>
    <script src="server.js"></script>
    <script src="script.js"></script>
    <script src="index.js"></script>
    <script src="NodeMailer.js"></script>
    <script src="searchbar.js"></script>
</body>
</html>